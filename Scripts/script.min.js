(function(){function e(){for(var r=document.getElementsByTagName("input"),t=0;t<r.length;t++)r[t].type==="checkbox"&&n.push(r[t]);i=document.getElementsByTagName("em")}function o(){var c,o,e,l,h;for(u=document.getElementsByTagName("mark")[0],t=document.getElementsByTagName("progress")[0],f=t.firstElementChild||t.firstChild,c=0,o=0;o<n.length;o++)e=n[o],l=localStorage.getItem(e.id)==="true",e.checked=l,e.onchange=r,e.parentNode.className!=="optional"&&c++;for(h=0;h<i.length;h++)i[h].onclick=s;t.max=c}function s(n){n||(n=window.event);var t=n.target||n.srcElement,i=t.nextElementSibling||t.nextSibling;i.style.maxHeight=i.style.maxHeight!=="100px"?"100px":"0"}function r(){for(var r=0,f=0,t,i=0;i<n.length;i++)t=n[i],localStorage.setItem(t.id,t.checked),t.parentNode.className!=="optional"?t.checked&&r++:t.checked&&f++;u.innerHTML=f.toString(),h(r)}function h(n){t.value=n;var i=parseInt(t.max,10);f.style.width=n*100/i+"%"}function c(){document.getElementById("clearall").onclick=function(){for(var t=0;t<n.length;t++)n[t].checked=!1;return localStorage.clear(),r(),!1}}var n=[],i=[],t,u,f;localStorage&&(e(),o(),r(),c())})();