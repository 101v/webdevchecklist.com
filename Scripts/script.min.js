(function(){function h(){for(var r=document.getElementsByTagName("input"),i=0;i<r.length;i++)r[i].type==="checkbox"&&t.push(r[i]);n=document.getElementsByTagName("em")}function c(){var v,h,i,p,c,a,y;for(e=document.getElementsByTagName("mark")[0],u=document.getElementsByTagName("progress")[0],o=u.firstElementChild||u.firstChild,r=location.pathname.substr(1),v=0,h=0;h<t.length;h++)i=t[h],i.onchange=f,Modernizr.localstorage&&(p=localStorage.getItem(r+i.id)==="true",i.checked=p),i.parentNode.className!=="optional"&&v++;for(c=0;c<n.length;c++)n[c].onclick=l;for(a=0;a<n.length;a++)y=n[a],Modernizr.localstorage&&localStorage.getItem(r+y.id)&&s(y);u.max=v}function l(t){var u;for(t||(t=window.event),u=t.target||t.srcElement,s(u),i=0;i<n.length;i++)u=n[i],u.className==="open"?localStorage&&localStorage.setItem(r+u.id,!0):localStorage&&localStorage.removeItem(r+u.id)}function s(t){for(var r=t.nextElementSibling||t.nextSibling,u,i=0;i<n.length;i++)n[i]!==t&&(u=n[i].nextElementSibling||n[i].nextSibling,u.style.maxHeight="0"),n[i].className="info";r.style.maxHeight!=="100px"?(r.style.maxHeight="100px",t.className="open"):r.style.maxHeight="0"}function f(){for(var u=0,f=0,n,i=0;i<t.length;i++)n=t[i],n.checked?localStorage&&localStorage.setItem(r+n.id,n.checked):localStorage&&localStorage.removeItem(r+n.id),n.parentNode.className!=="optional"?n.checked&&u++:n.checked&&f++;e.innerHTML=f.toString(),a(u)}function a(n){u.value=n;var t=parseInt(u.max,10);o.style.width=n*100/t+"%"}function v(){document.getElementById("clearall").onclick=function(){for(var n=0;n<t.length;n++)t[n].checked=!1;return localStorage&&localStorage.clear(),f(),!1}}var t=[],n=[],u,e,o,r;window.onload=function(){h(),c(),f(),v(),localStorage.length===0&&n[0].click()}})();