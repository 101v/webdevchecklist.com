(function(){function w(){for(var i=document.getElementsByTagName("input"),t=0;t<i.length;t++)i[t].type==="checkbox"&&r.push(i[t]);n=document.getElementsByTagName("em"),h=r.slice(0),v(h),e=Array.prototype.slice.call(n),v(e)}function b(){var v,e,i,p,s,h,y;for(l=document.getElementsByTagName("mark")[0],u=document.getElementsByTagName("progress")[0],f=document.getElementsByTagName("nav")[0],a=u.firstElementChild||u.firstChild,t=location.pathname.substr(1),(f.firstElementChild||f.firstChild).onclick=nt,v=0,e=0;e<r.length;e++)i=r[e],i.onchange=o,Modernizr.localstorage&&(p=localStorage.getItem(t+i.id)==="true",i.checked=p),i.parentNode.className!=="optional"&&v++;for(s=0;s<n.length;s++)n[s].onclick=k;for(h=0;h<n.length;h++)y=n[h],Modernizr.localstorage&&localStorage.getItem(t+y.id)&&c(y);u.max=v,t&&t.endsWith("demo")&&tt()}function k(r){var u;for(r||(r=window.event),u=r.target||r.srcElement,c(u),i=0;i<n.length;i++)u=n[i],u.className==="open"?localStorage&&localStorage.setItem(t+u.id,!0):localStorage&&localStorage.removeItem(t+u.id)}function c(t){for(var r=t.nextElementSibling||t.nextSibling,u,i=0;i<n.length;i++)n[i]!==t&&(u=n[i].nextElementSibling||n[i].nextSibling,u.style.maxHeight="0"),n[i].className="";r.style.maxHeight!=="100px"?(r.style.maxHeight="100px",t.className="open"):r.style.maxHeight="0"}function o(){for(var u=0,f=0,n,i=0;i<r.length;i++)n=r[i],n.checked?localStorage&&localStorage.setItem(t+n.id,n.checked):localStorage&&localStorage.removeItem(t+n.id),n.parentNode.className!=="optional"?n.checked&&u++:n.checked&&f++;l.innerHTML=f.toString(),d(u)}function d(n){u.value=n;var t=parseInt(u.max,10);a.style.width=n*100/t+"%"}function g(){document.getElementById("reset").onclick=function(){return s(),!1}}function s(){for(var u,i=0;i<r.length;i++)r[i].checked=!1,Modernizr.localstorage&&localStorage.removeItem(t+r[i].id);for(u=0;u<n.length;u++)Modernizr.localstorage&&localStorage.removeItem(t+n[u].id);o()}function nt(n){n||(n=window.event);var t=n.target||n.srcElement;f.className=f.className!=="open"?"open":""}function v(n){var t=n.length,i,r,u;if(t==0)return!1;while(--t)i=Math.floor(Math.random()*(t+1)),r=n[t],u=n[i],n[t]=u,n[i]=r}function tt(){y(0,r),p(0,e)}function y(n,t){n==0&&s(),n>t.length-1&&(n=0,s(),t=h),setTimeout(function(){t[n].checked=!0,o(),y(++n,t)},200)}function p(n,t){n>e.length-1&&(n=0,s()),c(t[n]),setTimeout(function(){p(++n,t)},2e3)}var r=[],h=[],n=[],e=[],u,l,a,t,f;window.onload=function(){w(),b(),o(),g(),localStorage.length===0&&n[0].click()},String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1}})();