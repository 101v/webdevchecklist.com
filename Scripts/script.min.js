(function(){function o(){for(var r=document.getElementsByTagName("input"),i=0;i<r.length;i++)r[i].type==="checkbox"&&t.push(r[i]);n=document.getElementsByTagName("em")}function s(){var l,s,o,a,c;for(f=document.getElementsByTagName("mark")[0],i=document.getElementsByTagName("progress")[0],e=i.firstElementChild||i.firstChild,r=location.pathname.substr(1),l=0,s=0;s<t.length;s++)o=t[s],o.onchange=u,Modernizr.localstorage&&(a=localStorage.getItem(r+o.id)==="true",o.checked=a),o.parentNode.className!=="optional"&&l++;for(c=0;c<n.length;c++)n[c].onclick=h;i.max=l}function h(t){var r,u,i,f;for(t||(t=window.event),r=t.target||t.srcElement,u=r.nextElementSibling||r.nextSibling,i=0;i<n.length;i++)n[i]!==r&&(f=n[i].nextElementSibling||n[i].nextSibling,f.style.maxHeight="0"),n[i].className="info";u.style.maxHeight!=="95px"?(u.style.maxHeight="95px",r.className="open"):u.style.maxHeight="0"}function u(){for(var u=0,e=0,n,i=0;i<t.length;i++)n=t[i],n.checked?localStorage&&localStorage.setItem(r+n.id,n.checked):localStorage&&localStorage.removeItem(r+n.id),n.parentNode.className!=="optional"?n.checked&&u++:n.checked&&e++;f.innerHTML=e.toString(),c(u)}function c(n){i.value=n;var t=parseInt(i.max,10);e.style.width=n*100/t+"%"}function l(){document.getElementById("clearall").onclick=function(){for(var n=0;n<t.length;n++)t[n].checked=!1;return localStorage&&localStorage.clear(),u(),!1}}var t=[],n=[],i,f,e,r;window.onload=function(){o(),s(),u(),l(),localStorage.length===0&&n[0].click()}})();