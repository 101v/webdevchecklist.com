(function(){function c(){for(var r=document.getElementsByTagName("input"),i=0;i<r.length;i++)r[i].type==="checkbox"&&t.push(r[i]);n=document.getElementsByTagName("em")}function l(){var y,c,i,w,l,v,p;for(o=document.getElementsByTagName("mark")[0],u=document.getElementsByTagName("progress")[0],f=document.getElementsByTagName("nav")[0],s=u.firstElementChild||u.firstChild,r=location.pathname.substr(1),y=0,c=0;c<t.length;c++)i=t[c],i.onchange=e,Modernizr.localstorage&&(w=localStorage.getItem(r+i.id)==="true",i.checked=w),i.parentNode.className!=="optional"&&y++;for(l=0;l<n.length;l++)n[l].onclick=a;for(v=0;v<n.length;v++)p=n[v],Modernizr.localstorage&&localStorage.getItem(r+p.id)&&h(p);u.max=y}function a(t){var u;for(t||(t=window.event),u=t.target||t.srcElement,h(u),i=0;i<n.length;i++)u=n[i],u.className==="open"?localStorage&&localStorage.setItem(r+u.id,!0):localStorage&&localStorage.removeItem(r+u.id)}function h(t){for(var r=t.nextElementSibling||t.nextSibling,u,i=0;i<n.length;i++)n[i]!==t&&(u=n[i].nextElementSibling||n[i].nextSibling,u.style.maxHeight="0"),n[i].className="info";r.style.maxHeight!=="100px"?(r.style.maxHeight="100px",t.className="open"):r.style.maxHeight="0"}function e(){for(var u=0,f=0,n,i=0;i<t.length;i++)n=t[i],n.checked?localStorage&&localStorage.setItem(r+n.id,n.checked):localStorage&&localStorage.removeItem(r+n.id),n.parentNode.className!=="optional"?n.checked&&u++:n.checked&&f++;o.innerHTML=f.toString(),v(u)}function v(n){u.value=n;var t=parseInt(u.max,10);s.style.width=n*100/t+"%"}function y(){document.getElementById("clearall").onclick=function(){for(var n=0;n<t.length;n++)t[n].checked=!1;return localStorage&&localStorage.clear(),e(),!1}}function p(n){n||(n=window.event);for(var t=n.target||n.srcElement;t.parentNode;){if(t.tagName==="NAV")break;t=t.parentNode}f.className=t.tagName==="NAV"?"open":""}var t=[],n=[],u,o,s,r,f;window.onload=function(){c(),l(),e(),y(),localStorage.length===0&&n[0].click(),window.onclick=p}})();